!function(){"use strict";jQuery((function(t){var o,n,a,e,i,c,l=!1,s=[],r=[],g=t(".touch-points-container"),d=t("#form-locate-touch-points"),p="".concat(globals.wp_theme_url,"/assets/build/images/");t.ajax({url:"https://maps.googleapis.com/maps/api/js?callback=initMap&key=".concat(globals.g_key),dataType:"script",async:!0}),t(".touch-point-types a").each((function(o,n){r[t(n).data("id")]={name:t(n).data("name"),icon:"".concat(p).concat(t(n).data("icon"))}})),window.initMap=function(){o=new google.maps.LatLng(20.5937,78.9629),n=new google.maps.Map(document.getElementById("map"),{center:o,zoom:13,mapTypeControl:!1,fullscreenControl:!1,streetViewControl:!1}),google.maps.event.addListener(n,"idle",(function(){!l&&0==h()&&s[0]&&((c=new google.maps.LatLngBounds).extend(o),c.extend(s[0].getPosition()),n.fitBounds(c),l=!0)})),t("#geo_lat").val().trim().length>0&&t("#geo_long").val().trim().length>0&&_(),t("#location").val().trim().length>0&&d.trigger("submit")},d.find('[name="location"]').on("change",(function(){t("#geo_lat").val(""),t("#geo_long").val("")})),d.on("submit",(function(t){t.preventDefault(),u()&&v()})),t(".touch-point-types a").on("click",(function(o){o.preventDefault(),u()&&(t(".touch-point-types a").removeClass("active"),t(o.target).addClass("active"),v())})),g.on("click",".media",(function(o){m(t(o.currentTarget).data("id"),"start")})),t(document).on("scroll",(function(){t(".tab-selector").removeClass("show")}));var u=function(){return t("#location").val().trim().length>2||t("#geo_lat").val().trim().length>0&&t("#geo_long").val().trim().length>0?(t(".error").text(""),!0):(t(".error").text("Please enter valid City/Pincode"),!1)},m=function(t,a){i&&i.setAnimation(null),s[t]&&(i=s[t],"start"===a?(i.setAnimation(google.maps.Animation.BOUNCE),n.panTo(i.getPosition()),(c=new google.maps.LatLngBounds).extend(o),c.extend(i.getPosition()),n.fitBounds(c)):i.setAnimation(null))},v=function(){t.ajax({url:globals.wp_admin_url,type:"post",data:{action:"get_touch_points",user_location:t("#location").val().trim(),category:t(".touch-point-types a.active").data("id"),geo_radius:t("#geo_radius").val(),latitude:t("#geo_lat").val(),longitude:t("#geo_long").val()},dataType:"json",beforeSend:function(){t(".error_msg").text(""),t(".touch-points").html(""),s.forEach((function(t){t.setMap(null)})),s=[],g.find(".loader").addClass("active"),t("html, body").animate({scrollTop:0},"slow")},complete:function(){g.find(".loader").removeClass("active")},success:function(i){if(i.touch_points.length>0){var c="";t.each(i.touch_points,(function(o,e){var i="";""!=e.contact_number&&t.each(e.contact_number.split(/[//|]+/),(function(t,o){i+=0!=t?" | ":"",i+='<a href="tel:'.concat(o,'">').concat(o,"</a>")})),c+='<div class="media" data-id="'.concat(o,'">\n                                  <div class="media-img mr-3">\n                                      <img src="').concat(r[e.category].icon,'" alt="Dealer">\n                                  </div>\n                                  <div class="media-body">\n                                      <div class="heading-wrapper">\n                                        <h2>').concat(e.name,'</h2>\n                                        <span class="distance">').concat(parseFloat(e.distance).toFixed(1)," KM</span>\n                                      </div>\n                                      <h3>").concat(e.description?e.description:r[e.category].name,"</h3>\n                                      <address>").concat(e.address,'</address>\n                                      <div class="contact-info">\n                                          <div class="img-box">\n                                              <img src="').concat(globals.wp_theme_url,'/assets/build/images/icon-phone.svg" alt="phone-line">\n                                          </div>\n                                          <div>').concat(i,"</div>\n                                      </div>\n                                  </div>\n                              </div>"),function(o){if(o.latitude&&o.latitude>0){var e=new google.maps.LatLng(o.latitude,o.longitude),i=new google.maps.Marker({position:e,map:n,icon:r[o.category].icon,draggable:!1,animation:google.maps.Animation.Mp,optimized:!1,touch_point_id:o.dealer_code,touch_point_name:o.name,touch_point_address:o.address,touch_point_city:o.city,touch_point_state:o.state});google.maps.event.addListener(i,"click",(function(){a&&a.close(),(a=new google.maps.InfoWindow({content:"<div>\n          <h4>".concat(i.touch_point_name,"</h4>\n          <p>").concat(i.touch_point_address,'</p>\n          <a target="_blank" class="btn btn-link" href="https://www.google.pl/maps/dir/').concat(t("#location").val().trim(),"/").concat(i.touch_point_name,", ").concat(i.touch_point_city,"/@").concat(i.position.lat(),",").concat(i.position.lng(),',14z/">Get Directions</a>\n          </div>')})).open(n,i)})),s.push(i)}}(e)})),t(".touch-points").html(c),l=!1}else t(".touch-points").html("<p>No touch points are available around the selected location.</p>");var g,d;g=i.latitude,d=i.longitude,o=new google.maps.LatLng(g,d),n.setCenter(o),e&&e.setMap(null),e=new google.maps.Marker({position:o,map:n,icon:"".concat(p,"icon-map-center.svg"),draggable:!1,animation:google.maps.Animation.Op,optimized:!1,title:"Your location"}),n.setZoom(13),t("#geo_lat").val(i.latitude),t("#geo_long").val(i.longitude)},error:function(){jQuery(".touch-points").html("<p>No touch points are available around the selected location.</p>")}})},h=function(){for(var t=n.getBounds(),o=0,a=0;a<s.length;a++){var e=s[a];!0===t.contains(e.getPosition())&&o++}return o},_=function(){var o=new google.maps.LatLng(parseFloat(t("#geo_lat").val().trim()),parseFloat(t("#geo_long").val().trim()));(new google.maps.Geocoder).geocode({latLng:o},(function(o,n){if(n==google.maps.GeocoderStatus.OK&&o[0]){var a=o[0].formatted_address.split(","),e=a[a.length-3];t("#location").val(e.trim()),d.trigger("submit")}else t("#geo_lat").val(""),t("#geo_long").val("")}))}}))}();
/*! This file is auto-generated */
!function(c,d){"use strict";var e=!1,n=!1;if(d.querySelector)if(c.addEventListener)e=!0;if(c.wp=c.wp||{},!c.wp.receiveEmbedMessage)if(c.wp.receiveEmbedMessage=function(e){var t=e.data;if(t)if(t.secret||t.message||t.value)if(!/[^a-zA-Z0-9]/.test(t.secret)){for(var r,a,i,s=d.querySelectorAll('iframe[data-secret="'+t.secret+'"]'),n=d.querySelectorAll('blockquote[data-secret="'+t.secret+'"]'),o=0;o<n.length;o++)n[o].style.display="none";for(o=0;o<s.length;o++)if(r=s[o],e.source===r.contentWindow){if(r.removeAttribute("style"),"height"===t.message){if(1e3<(i=parseInt(t.value,10)))i=1e3;else if(~~i<200)i=200;r.height=i}if("link"===t.message)if(a=d.createElement("a"),i=d.createElement("a"),a.href=r.getAttribute("src"),i.href=t.value,i.host===a.host)if(d.activeElement===r)c.top.location.href=t.value}}},e)c.addEventListener("message",c.wp.receiveEmbedMessage,!1),d.addEventListener("DOMContentLoaded",t,!1),c.addEventListener("load",t,!1);function t(){if(!n){n=!0;for(var e,t,r=-1!==navigator.appVersion.indexOf("MSIE 10"),a=!!navigator.userAgent.match(/Trident.*rv:11\./),i=d.querySelectorAll("iframe.wp-embedded-content"),s=0;s<i.length;s++){if(!(e=i[s]).getAttribute("data-secret"))t=Math.random().toString(36).substr(2,10),e.src+="#?secret="+t,e.setAttribute("data-secret",t);if(r||a)(t=e.cloneNode(!0)).removeAttribute("security"),e.parentNode.replaceChild(t,e)}}}}(window,document);
