/*! For license information please see booking.js.LICENSE.txt */
!function(){"use strict";var t,e=function(){return(e=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},n=function(){function t(t){this.options=t,this.listeners={}}return t.prototype.on=function(t,e){var n=this.listeners[t]||[];this.listeners[t]=n.concat([e])},t.prototype.triggerEvent=function(t,e){var n=this;(this.listeners[t]||[]).forEach((function(t){return t({target:n,event:e})}))},t}();!function(t){t[t.Add=0]="Add",t[t.Remove=1]="Remove"}(t||(t={}));var o,i=function(){function e(){this.notifications=[]}return e.prototype.push=function(e){this.notifications.push(e),this.updateFn(e,t.Add,this.notifications)},e.prototype.splice=function(e,n){var o=this.notifications.splice(e,n)[0];return this.updateFn(o,t.Remove,this.notifications),o},e.prototype.indexOf=function(t){return this.notifications.indexOf(t)},e.prototype.onUpdate=function(t){this.updateFn=t},e}();!function(t){t.Dismiss="dismiss",t.Click="click"}(o||(o={}));var a={types:[{type:"success",className:"notyf__toast--success",backgroundColor:"#3dc763",icon:{className:"notyf__icon--success",tagName:"i"}},{type:"error",className:"notyf__toast--error",backgroundColor:"#ed3d3d",icon:{className:"notyf__icon--error",tagName:"i"}}],duration:2e3,ripple:!0,position:{x:"right",y:"bottom"},dismissible:!1},r=function(){function n(){this.notifications=[],this.events={},this.X_POSITION_FLEX_MAP={left:"flex-start",center:"center",right:"flex-end"},this.Y_POSITION_FLEX_MAP={top:"flex-start",center:"center",bottom:"flex-end"};var t=document.createDocumentFragment(),e=this._createHTLMElement({tagName:"div",className:"notyf"});t.appendChild(e),document.body.appendChild(t),this.container=e,this.animationEndEventName=this._getAnimationEndEventName(),this._createA11yContainer()}return n.prototype.on=function(t,n){var o;this.events=e(e({},this.events),((o={})[t]=n,o))},n.prototype.update=function(e,n){n===t.Add?this.addNotification(e):n===t.Remove&&this.removeNotification(e)},n.prototype.removeNotification=function(t){var e,n,o=this,i=this._popRenderedNotification(t);i&&((e=i.node).classList.add("notyf__toast--disappear"),e.addEventListener(this.animationEndEventName,n=function(t){t.target===e&&(e.removeEventListener(o.animationEndEventName,n),o.container.removeChild(e))}))},n.prototype.addNotification=function(t){var e=this._renderNotification(t);this.notifications.push({notification:t,node:e}),this._announce(t.options.message||"Notification")},n.prototype._renderNotification=function(t){var e,n=this._buildNotificationCard(t),o=t.options.className;return o&&(e=n.classList).add.apply(e,o.split(" ")),this.container.appendChild(n),n},n.prototype._popRenderedNotification=function(t){for(var e=-1,n=0;n<this.notifications.length&&e<0;n++)this.notifications[n].notification===t&&(e=n);if(-1!==e)return this.notifications.splice(e,1)[0]},n.prototype.getXPosition=function(t){var e;return(null===(e=null==t?void 0:t.position)||void 0===e?void 0:e.x)||"right"},n.prototype.getYPosition=function(t){var e;return(null===(e=null==t?void 0:t.position)||void 0===e?void 0:e.y)||"bottom"},n.prototype.adjustContainerAlignment=function(t){var e=this.X_POSITION_FLEX_MAP[this.getXPosition(t)],n=this.Y_POSITION_FLEX_MAP[this.getYPosition(t)],o=this.container.style;o.setProperty("justify-content",n),o.setProperty("align-items",e)},n.prototype._buildNotificationCard=function(t){var e,n=this,i=t.options,a=i.icon;this.adjustContainerAlignment(i);var r=this._createHTLMElement({tagName:"div",className:"notyf__toast"}),s=this._createHTLMElement({tagName:"div",className:"notyf__ripple"}),c=this._createHTLMElement({tagName:"div",className:"notyf__wrapper"}),d=this._createHTLMElement({tagName:"div",className:"notyf__message"});d.innerHTML=i.message||"";var l=i.background||i.backgroundColor;if(a&&"object"==typeof a){var p=this._createHTLMElement({tagName:"div",className:"notyf__icon"}),u=this._createHTLMElement({tagName:a.tagName||"i",className:a.className,text:a.text}),f=null!==(e=a.color)&&void 0!==e?e:l;f&&(u.style.color=f),p.appendChild(u),c.appendChild(p)}if(c.appendChild(d),r.appendChild(c),l&&(i.ripple?(s.style.background=l,r.appendChild(s)):r.style.background=l),i.dismissible){var m=this._createHTLMElement({tagName:"div",className:"notyf__dismiss"}),h=this._createHTLMElement({tagName:"button",className:"notyf__dismiss-btn"});m.appendChild(h),c.appendChild(m),r.classList.add("notyf__toast--dismissible"),h.addEventListener("click",(function(e){var i,a;null===(a=(i=n.events)[o.Dismiss])||void 0===a||a.call(i,{target:t,event:e}),e.stopPropagation()}))}r.addEventListener("click",(function(e){var i,a;return null===(a=(i=n.events)[o.Click])||void 0===a?void 0:a.call(i,{target:t,event:e})}));var g="top"===this.getYPosition(i)?"upper":"lower";return r.classList.add("notyf__toast--"+g),r},n.prototype._createHTLMElement=function(t){var e=t.tagName,n=t.className,o=t.text,i=document.createElement(e);return n&&(i.className=n),i.textContent=o||null,i},n.prototype._createA11yContainer=function(){var t=this._createHTLMElement({tagName:"div",className:"notyf-announcer"});t.setAttribute("aria-atomic","true"),t.setAttribute("aria-live","polite"),t.style.border="0",t.style.clip="rect(0 0 0 0)",t.style.height="1px",t.style.margin="-1px",t.style.overflow="hidden",t.style.padding="0",t.style.position="absolute",t.style.width="1px",t.style.outline="0",document.body.appendChild(t),this.a11yContainer=t},n.prototype._announce=function(t){var e=this;this.a11yContainer.textContent="",setTimeout((function(){e.a11yContainer.textContent=t}),100)},n.prototype._getAnimationEndEventName=function(){var t,e=document.createElement("_fake"),n={MozTransition:"animationend",OTransition:"oAnimationEnd",WebkitTransition:"webkitAnimationEnd",transition:"animationend"};for(t in n)if(void 0!==e.style[t])return n[t];return"animationend"},n}(),s=function(){function t(t){var n=this;this.dismiss=this._removeNotification,this.notifications=new i,this.view=new r;var s=this.registerTypes(t);this.options=e(e({},a),t),this.options.types=s,this.notifications.onUpdate((function(t,e){return n.view.update(t,e)})),this.view.on(o.Dismiss,(function(t){var e=t.target,i=t.event;n._removeNotification(e),e.triggerEvent(o.Dismiss,i)})),this.view.on(o.Click,(function(t){var e=t.target,n=t.event;return e.triggerEvent(o.Click,n)}))}return t.prototype.error=function(t){var e=this.normalizeOptions("error",t);return this.open(e)},t.prototype.success=function(t){var e=this.normalizeOptions("success",t);return this.open(e)},t.prototype.open=function(t){var o=this.options.types.find((function(e){return e.type===t.type}))||{},i=e(e({},o),t);this.assignProps(["ripple","position","dismissible"],i);var a=new n(i);return this._pushNotification(a),a},t.prototype.dismissAll=function(){for(;this.notifications.splice(0,1););},t.prototype.assignProps=function(t,e){var n=this;t.forEach((function(t){e[t]=null==e[t]?n.options[t]:e[t]}))},t.prototype._pushNotification=function(t){var e=this;this.notifications.push(t);var n=void 0!==t.options.duration?t.options.duration:this.options.duration;n&&setTimeout((function(){return e._removeNotification(t)}),n)},t.prototype._removeNotification=function(t){var e=this.notifications.indexOf(t);-1!==e&&this.notifications.splice(e,1)},t.prototype.normalizeOptions=function(t,n){var o={type:t};return"string"==typeof n?o.message=n:"object"==typeof n&&(o=e(e({},o),n)),o},t.prototype.registerTypes=function(t){var n=(t&&t.types||[]).slice();return a.types.map((function(t){var o=-1;n.forEach((function(e,n){e.type===t.type&&(o=n)}));var i=-1!==o?n.splice(o,1)[0]:{};return e(e({},t),i)})).concat(n)},t}();function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){l(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}$=jQuery;var p=function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e3,i="";switch(n){case"success":i="linear-gradient(to right, #4db6ac, #009688)";break;case"error":i="linear-gradient(to right, #E57373, #E53935)";break;case"warning":i="linear-gradient(to right, #FFCC80, #FF9800)"}var a=new s;a.success((l(e={message:t,duration:o,background:i,icon:!1},"duration",o),l(e,"dismissible",!0),l(e,"position",{x:"center",y:"top"}),e))},u=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;$.ajax({url:wp_ajax_url,method:"post",data:d({step:t,action:"update_booking_state"},e),dataType:"json",beforeSend:function(){$(".page-loader").addClass("active")},success:function(t){t.success?(n&&(window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"bookingJourney",bookingStep:n})),location.href=t.next):($(".page-loader").removeClass("active"),p("Error while processing request.","error"))},error:function(t){console.error(t),$(".page-loader").addClass("active"),p("Error while processing request.","error")}})},f=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e.message&&e.status>=500?p("Something went wrong.","error"):"success"==e.status?(p(e.message,"success",5e3),t[0].form_name&&(window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"formSubmission",formName:t[0].form_name.value,enquiryType:t[0].enquiry_type?t[0].enquiry_type.value:""})),$(t).find("input, select, textarea").not("[type='hidden'], [type='radio'], [type='checkbox']").val("").trigger("unfocus"),$(t).find("[type='file']").trigger("change"),$(document).trigger("reset-otp")):p(e.message?e.message:"Error while processing the request.","error"),e.hasOwnProperty("errors")&&!$.isEmptyObject(e.errors)){try{jQuery("[name=".concat(Object.keys(e.errors)[0],"]")).trigger("focus")}catch(t){console.error(t)}$.each(e.errors,(function(e,n){var o=$('<label class="help-text error">'.concat($.isArray(n)?n[0]:n,"</label>"));t.find("[name=".concat(e,"]")).closest(".material-control").length>0?o.appendTo(t.find("[name=".concat(e,"]")).closest(".material-control")):o.appendTo(t.find("[name=".concat(e,"]")).parent())}))}else t.find(".formGroup").find(".help-text").remove()};jQuery((function(t){var e=t("#form-booking-step-1"),n=t("#form-booking-step-2"),o=t("#form-booking-step-3"),i=t("#back-to-previous-step");if(e.length>0){var a,r,s,c,d,l=e.find("[name='product']"),m=e.find("[name='submit']"),h=e.find("[name='product_model']"),g=e.find("[name='product_variant']"),v=t("#colors-wrapper"),y=t("#product-details-wrapper"),_=e.find(".loader");e.find("[name='product_model']").on("change",(function(){m.prop("disabled",!0),l.html("").prop("disabled",!0).trigger("change"),h.val()&&(_.addClass("active"),t.ajax({url:globals.wp_admin_url,type:"POST",data:{action:"get_variants",model:h.val()},beforeSend:function(){g.html('<option value="" disabled selected></option>'),g.trigger("change").trigger("unfocus"),l.trigger("change").trigger("unfocus")},success:function(e){try{var n=JSON.parse(e);n.length>0&&t.each(n,(function(t,e){g.append('<option value="'.concat(e.id,'">').concat(e.name,"</option>"))}))}catch(t){console.error(t)}},complete:function(){_.removeClass("active")}}))})),e.find("[name='product_variant']").on("change",(function(){m.prop("disabled",!0),l.html("").prop("disabled",!0).trigger("change"),h.val()>0&&g.val()>0&&(_.addClass("active"),t.ajax({url:globals.wp_admin_url,type:"POST",data:{action:"get_product_by_taxonomy",model:h.val(),variant:g.val()},success:function(e){try{var n=JSON.parse(e);n.length>0&&(m.prop("disabled",!1),l.prop("disabled",!1),t.each(n,(function(t,e){l.append('<option value="'.concat(e.id,"\" data-colors='").concat(JSON.stringify(e.colors),"' data-price=\"").concat(e.price,'">').concat(e.name,"</option>"))}))),l.trigger("change").trigger("unfocus")}catch(t){console.error(t)}},complete:function(){_.removeClass("active")}}))})),v.find(".colors-group").on("click","button",(function(e){c=t(e.currentTarget).data("code"),d=t(e.currentTarget).attr("title"),y.html('\n            <div class="img-box">\n              <img src="'.concat(t(e.currentTarget).data("image"),'" />\n            </div>\n            <div class="data">\n              <h3>').concat(r,"</h3>\n            </div>")),v.find(".colors-group button").removeClass("active"),t(e.currentTarget).addClass("active")})),e.find("[name='product']").on("change",(function(e){a=t(e.target).find("option:selected").val(),r=t(e.target).find("option:selected").text(),s=t(e.target).find("option:selected").data("colors"),v.addClass("d-none"),v.find(".colors-group").html(""),y.html(""),s&&s.length>0?(v.removeClass("d-none"),t.each(s,(function(t,e){v.find(".colors-group").append('<button type="button" class="btn btn-sm" title="'.concat(e.name,'" style="background: ').concat(e.code,'" data-code="').concat(e.code,'" data-image="').concat(e.product_image,'">\n                <span class="sr-only">').concat(e.name,"</span>\n              </button>"))})),t(e.target).data("color")?(v.find("button[title='"+t(e.target).data("color")+"']").trigger("click"),t(e.target).data("color","")):v.find(".colors-group button").first().trigger("click")):(v.addClass("d-none"),y.html('\n            <div class="img-box">\n            <svg xmlns="http://www.w3.org/2000/svg" width="245.2" height="201.223" viewBox="0 0 245.2 201.223"><defs><style>.a{fill:#231f20;}</style></defs><path class="a" d="M207.8,145.761l-2.809-22.728a64.111,64.111,0,0,0-14.968-34.016H208.8a7.184,7.184,0,0,0,7.184-7.184V53.1a7.184,7.184,0,0,0-7.184-7.184H180.069a21.575,21.575,0,0,0-21.551,21.551v7.184H144.151a7.184,7.184,0,1,0,0,14.367h19.582l3.3,54.052a16.75,16.75,0,0,1-16.731,17.784H129.784a7.192,7.192,0,0,1-7.184-7.184V132.118h4.31a7.184,7.184,0,0,0,7.184-7.184v-8.141a27.808,27.808,0,0,0-27.777-27.777H86.682V53.1A7.184,7.184,0,0,0,79.5,45.915H7.663A7.184,7.184,0,0,0,.479,53.1c0,16.384-.007,71.029.012,71.6a7.168,7.168,0,0,0,7.172,7.423h8.359C.209,160.957,0,195.137,0,196.771a7.184,7.184,0,0,0,7.184,7.184h5.578A38.368,38.368,0,0,0,27.42,239.123c26.414,20.3,65.639-.917,61.347-35.169h70.062a38.368,38.368,0,0,0,14.658,35.169c26.939,20.7,65.574-1.433,61.347-35.169h3.183a7.184,7.184,0,0,0,7.184-7.184C245.2,173.3,229.5,152.966,207.8,145.761Zm-34.915-78.3a7.192,7.192,0,0,1,7.184-7.184H201.62V74.649H172.885Zm-66.568,35.918a13.425,13.425,0,0,1,13.409,13.409v.958H86.682V103.384ZM36.4,60.282V74.649a7.184,7.184,0,0,0,14.367,0V60.282H72.315v57.469H14.846V60.282Zm71.836,71.836v21.551a21.575,21.575,0,0,0,21.551,21.551h20.522a31.153,31.153,0,0,0,31.071-33.028l-2.709-44.335A49.815,49.815,0,0,1,190.732,124.8l3.394,27.461a7.183,7.183,0,0,0,5.506,6.117,40.375,40.375,0,0,1,30.515,31.214H107.718a50.361,50.361,0,0,0-49.77-43.1H24.985a84.9,84.9,0,0,1,7.895-14.367ZM14.747,189.587a153.167,153.167,0,0,1,5.138-28.734h9.328v7.184a7.184,7.184,0,0,0,14.367,0v-7.184H57.948v7.184a7.184,7.184,0,0,0,14.367,0v-4.176a36.046,36.046,0,0,1,20.828,25.726h-78.4ZM36.174,227.73a23.98,23.98,0,0,1-8.866-23.776H74.221c4.421,21.691-20.532,37.234-38.047,23.776Zm175.247,0c-17.484,13.435-42.476-2.045-38.047-23.776h46.913a23.981,23.981,0,0,1-8.867,23.776Z" transform="translate(0 -45.915)"/></svg>\n            </div>'))})),e.find("[name='product']").trigger("change"),e.find("[name='product']").val()>0&&m.prop("disabled",!1),e.validate({submitHandler:function(t){return u("step-2",{product_id:a,color:c,color_name:d},"step-1-completed"),!1}})}if(n.length>0){var b=n.find("[name='state']"),N=n.find("[name='city']"),w=t("#dealer-info"),C=n.find("[name='submit']"),E=n.find(".loader");t(".state-dd").on("change",(function(e){t(document).trigger("location.changed",[t(".purchase-summary").find(".loader"),e.target]),w.html("")})),N.on("change",(function(e){var o=t(e.target).find("option:selected").text(),i=t(e.target).closest("form").find(".state-dd option:selected").text();w.html(""),t(e.target).val()&&""!=t(e.target).val()&&(E.addClass("active"),t.ajax({url:wp_ajax_url,data:{action:"get_dealer_list_booking",state:i,city:o},success:function(t){var e=JSON.parse(t);e.success&&(w.html(e.data),C.prop("disabled",!n.find("[name='dealer']:checked").val()))},complete:function(){E.removeClass("active")}}))})),""!=N.val()&&N.trigger("change"),n.on("change","[name='dealer']",(function(){n.find("[name='dealer']:checked").val()&&C.prop("disabled",!1)})),i.on("click",(function(){u("step-1",{})})),n.validate({submitHandler:function(){return u("step-3",{state_id:b.val(),city_id:N.val(),dealer_id:n.find("[name='dealer']:checked").val()},"step-2-completed"),!1}})}o.length>0&&(i.on("click",(function(){u("step-2",{})})),o.validate({submitHandler:function(){var e=o.serializeArray();t.ajax({url:wp_ajax_url,method:"post",data:e,dataType:"json",beforeSend:function(){t(".page-loader").addClass("active"),o.find(".form-response").html("")},success:function(e){t(".page-loader").removeClass("active");try{"success"==e.status?u("step-payment-process",{},"step-3-completed"):(p(e.message,"error"),e.force_reload?setTimeout((function(){location.reload()}),2e3):f(o,e))}catch(t){p("Error while processing the request","error")}},error:function(){t(".page-loader").removeClass("active"),p("Error while processing the request","error")}})}}))}))}();
/*! This file is auto-generated */
!function(c,d){"use strict";var e=!1,n=!1;if(d.querySelector)if(c.addEventListener)e=!0;if(c.wp=c.wp||{},!c.wp.receiveEmbedMessage)if(c.wp.receiveEmbedMessage=function(e){var t=e.data;if(t)if(t.secret||t.message||t.value)if(!/[^a-zA-Z0-9]/.test(t.secret)){for(var r,a,i,s=d.querySelectorAll('iframe[data-secret="'+t.secret+'"]'),n=d.querySelectorAll('blockquote[data-secret="'+t.secret+'"]'),o=0;o<n.length;o++)n[o].style.display="none";for(o=0;o<s.length;o++)if(r=s[o],e.source===r.contentWindow){if(r.removeAttribute("style"),"height"===t.message){if(1e3<(i=parseInt(t.value,10)))i=1e3;else if(~~i<200)i=200;r.height=i}if("link"===t.message)if(a=d.createElement("a"),i=d.createElement("a"),a.href=r.getAttribute("src"),i.href=t.value,i.host===a.host)if(d.activeElement===r)c.top.location.href=t.value}}},e)c.addEventListener("message",c.wp.receiveEmbedMessage,!1),d.addEventListener("DOMContentLoaded",t,!1),c.addEventListener("load",t,!1);function t(){if(!n){n=!0;for(var e,t,r=-1!==navigator.appVersion.indexOf("MSIE 10"),a=!!navigator.userAgent.match(/Trident.*rv:11\./),i=d.querySelectorAll("iframe.wp-embedded-content"),s=0;s<i.length;s++){if(!(e=i[s]).getAttribute("data-secret"))t=Math.random().toString(36).substr(2,10),e.src+="#?secret="+t,e.setAttribute("data-secret",t);if(r||a)(t=e.cloneNode(!0)).removeAttribute("security"),e.parentNode.replaceChild(t,e)}}}}(window,document);
